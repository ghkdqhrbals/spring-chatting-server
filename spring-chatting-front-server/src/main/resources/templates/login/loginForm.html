<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <link th:href="@{/css/common.css}"
          href="../css/common.css" rel="stylesheet">
</head>
<body>

<script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<div class="center">

    <div class="py-5 text-center">
        <h2>Login</h2>
<!--        <h2 th:field="${processId}"> 회원가입 진행중인 ID</h2>-->
<!--        <p id="statsArea">HI</p>-->
    </div>



    <form action="" th:action th:object="${loginForm}" method="post">


        <div th:if="${#fields.hasGlobalErrors()}">
            <p class="field-error tc" th:each="err : ${#fields.globalErrors()}" th:text="${err}">전체 오류 메시지</p>
        </div>


        <div class="grid grid--block">
            <div class="item-3">
                <p class="col-l">id</p>
            </div>
            <div class="item-6">
                <input type="text" th:field="*{loginId}" class="form-control"
                       th:errorclass="field-error">
            </div>
            <div class="item-6">
                <div class="field-error" th:errors="*{loginId}" >오류메세지</div>
            </div>
        </div>

        <div class="grid grid--block">
            <div class="item-3">
                <p class="col-l">password</p>
            </div>
            <div class="item-6">
                <input type="password" th:field="*{password}" class="form-control"
                       th:errorclass="field-error">
            </div>
            <div class="item-6">
                <div class="field-error" th:errors="*{password}" >오류메세지</div>
            </div>
        </div>


        <div class="container-2" style="padding-top: 30px">
            <div class="item-6">
                <button class="w-100 btn-primary" type="submit">login</button>
            </div>
            <div class="item-6">
                <button class="w-100 btn-primary" onclick="location.href='../users/addUserForm.html'"
                        th:onclick="|location.href='@{/user}'|"
                        type="button">register</button>
            </div>
        </div>
    </form>

</div> <!-- /container -->
</body>
</html>

<!--<script th:inline="javascript">-->
<!--    /*<![CDATA[*/-->

<!--    var str = '';-->
<!--    var sockJs = new SockJS("/stomp/chat");-->

<!--    //1. SockJS를 내부에 들고있는 stomp를 내어줌-->
<!--    var stomp = Stomp.over(sockJs);-->

<!--    //2. connection이 맺어지면 실행-->
<!--    stomp.connect({}, function () {-->
<!--        var userId = document.getElementById("processId");-->
<!--        console.log("Successfully created STOMP connection with : "+userId );-->


<!--        if (userId != null){-->
<!--            console.log(userId);-->
<!--            //4. subscribe(path, callback)으로 메세지를 받을 수 있음-->
<!--            stomp.subscribe("/sub/user/" + userId.value, function (stats) {-->
<!--                var content = JSON.parse(stats.body);-->

<!--                console.log(stats);-->
<!--                str = "<div>";-->
<!--                str += content.userStatus + " : " + content.chatStatus + " : " + content.customerStatus;-->
<!--                str += "</div>";-->
<!--                $("#statsArea").append(str);-->
<!--            });-->
<!--        }-->
<!--        //3. send(path, header, message)로 메세지를 보낼 수 있음-->
<!--        // stomp.send('/pub/chat/enter', {}, JSON.stringify({roomId: roomId,writerId:writerId, writer: username, createAt:Date.now()}))-->
<!--    });-->




<!--    /*]]>*/-->
<!--</script>-->